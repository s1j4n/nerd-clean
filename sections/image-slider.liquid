{% liquid
  assign products_to_display = section.blocks.size

  assign image_class = "image-hw-full nerd-rounded-md color-" | append: section.settings.color_scheme_card
  assign columns_mobile_int = section.settings.columns_mobile | plus: 0
  assign show_mobile_slider = false
  if section.settings.display_style == 'slider' and products_to_display > columns_mobile_int
    assign show_mobile_slider = true
  endif

  assign show_desktop_slider = false
  if section.settings.display_style == 'slider' and products_to_display > section.settings.columns_desktop
    assign show_desktop_slider = true
  endif
%}


{% stylesheet %}
.slick-slide{
  margin-right: 10px;
}
  
  {% endstylesheet %}

<div class="nerd-container color-{{ section.settings.color_scheme }}">
  <div class="nerd-page-width">
    <div class="nerd-title scroll-trigger animate--slide-in {% if section.settings.heading_center %} text-center {% endif %} ">{{ section.settings.title }}</div>
    <div class="nerd-content">
     <div class="nerd-slider-container" >
          {% for block in section.blocks %}
            {% assign image = block.settings.image %}
           
              {% if image %}
                {{
                  image
                  | image_url: width: image.width
                  | image_tag: class: image_class, loading: 'lazy'
                }}
              {% else %}
                {{ 'image' | placeholder_svg_tag: image_class }}
              {% endif %}
            
          {%- else -%}
            {%- for i in (1..4) -%}
              

                {{ 'image' | placeholder_svg_tag: image_class }}
            
            {%- endfor -%}
          {%- endfor -%}
        </div>

        {%- if show_mobile_slider or show_desktop_slider -%}
          <div class="slider-buttons no-js-hidden justify-{{ buttons_position }} ">
            <button
              type="button"
              class="slider-button slider-button--prev"
              name="previous"
              aria-label="{{ 'general.slider.previous_slide' | t }}"
              aria-controls="Slider-{{ section.id }}"
            >
              {% if section.settings.buttons_style == 'arrow' %}
                <div class="arrow-icon">
                  {% render 'icon-arrow' %}
                </div>

              {% else %}
                {% render 'icon-caret' %}
              {% endif %}
            </button>
            <div class="slider-counter caption">
              <span class="slider-counter--current">1</span>
              <span aria-hidden="true"> / </span>
              <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
              <span class="slider-counter--total">{{ products_to_display }}</span>
            </div>
            <button
              type="button"
              class="slider-button slider-button--next"
              name="next"
              aria-label="{{ 'general.slider.next_slide' | t }}"
              aria-controls="Slider-{{ section.id }}"
            >
              {% if section.settings.buttons_style == 'arrow' %}
                <div class="arrow-icon">
                  {% render 'icon-arrow' %}
                </div>

              {% else %}
                {% render 'icon-caret' %}
              {% endif %}
            </button>
          </div>
        {%- endif -%}
    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function(){
  $('.nerd-slider-container').slick({
  {% if section.settings.slider_type == "dots" %}
    dots: true,
  {% endif %}
  infinite: false,
  speed: 300,
                  slidesToShow: 3,
                  slidesToScroll: 1,
                  gap: 10,
                  responsive: [
                    {
                      breakpoint: 1024,
                      settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        infinite: true,
                        dots: true
                      }
                    },
                    {
                      breakpoint: 970,
                      settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2
                      }
                    },
                    {
                      breakpoint: 750,
                      settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1
                      }
                    }
                  ]
                      });
                    });</script>



{% schema %}
{
  "name": "Image Slider",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "title",
      "default": "Image Gallery",
      "label": "Title"
    },
     {
      "type" : "checkbox",
      "id" : "full_width",
      "default" : false,
      "label" : "Full Width"
      
    },
      {
      "type" : "checkbox",
      "id" : "heading_center",
      "default" : false,
      "label" : "Center Heading"
      
    },

  {
    "type" : "radio",
    "id" : "display_style",
    "label" : "Display Style",
    "default" : "slider",
    "options" : [
      {
        "value" : "slider",
        "label" :  "Slider"
      },
      {
        "value" : "grid",
        "label" : "grid"
      }

    ]
  },
    {
    "type" : "radio",
    "id" : "columns_desktop",
    "label" : "Columns in Desktop",
    "default" : "3",
    "options" : [
      {
        "value" : "3",
        "label" :  "3"
      },
      {
        "value" : "4",
        "label" : "4"
      }

    ]
  },
      {
    "type" : "radio",
    "id" : "columns_mobile",
    "label" : "Columns in Mobile",
    "default" : "1",
    "options" : [
      {
        "value" : "1",
        "label" :  "1"
      },
      {
        "value" : "2",
        "label" : "2"
      }

    ]
  },
     {
    "type": "color_scheme",
    "id": "color_scheme",
    "label": "t:sections.all.colors.label",
    "info": "t:sections.image-banner.settings.color_scheme.info",
    "default": "background-1"
    },

           {
    "type": "color_scheme",
    "id": "color_scheme_card",
    "label": "Card Color Scheme",
    "default": "background-2"
    }

  ],
  "blocks" : [
     {
        "type": "image_picker",
        "name": "image",
        "settings": [
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }
        ]
      }

  ],
  "presets" : [
    {
      "name" : "Image Slider"
    }
  ]
}
{% endschema %}


