{{ 'icon-with-text.css' | asset_url | stylesheet_tag }}

{% liquid
  assign products_to_display = section.blocks.size

  assign columns_mobile_int = section.settings.columns_mobile | plus: 0
  assign show_mobile_slider = false
  if section.settings.display_style == 'slider' and products_to_display > columns_mobile_int
    assign show_mobile_slider = true
  endif

  assign columns_desktop_int = section.settings.columns_desktop | plus: 0
  assign show_desktop_slider = false

  if section.settings.display_style == 'slider' and products_to_display > columns_desktop_int
    assign show_desktop_slider = true
  endif
%}

{% style %}
  .nerd-iconwithtext svg {
    height: {{ section.settings.icon_height_desktop }}px;
    width: {{ section.settings.icon_height_desktop }}px;
  }



  @media screen and (max-width: 750px) {
    .nerd-iconwithtext svg {
      color: red;
      height: {{ section.settings.icon_height_mobile }}
      px;
      width: {{ section.settings.icon_height_mobile }}
      px;
    }


  }
{% endstyle %}

<div class="nerd-container color-{{ section.settings.color_scheme }}">
  <div class="{% unless section.settings.full_width %}nerd-page-width {% endunless %}">
    <div class="title animate--slide-in">{{ section.settings.title }}</div>
    <div class="nerd-content">
      <slider-component class="slider-mobile-gutter slider-component-full-width slider-component-desktop scroll-trigger animate--slide-in">
      <ul
        id="Slider-{{ section.id }}"
        class="grid product-grid contains-card contains-card--product contains-card--standard grid--{{ section.settings.columns_desktop }}-col-desktop grid--{{ section.settings.columns_mobile }}-col-tablet-down slider slider--desktop slider--tablet grid--peek"
        role="list"
        aria-label="{{ 'general.slider.name' | t }}"
      >
          {% for block in section.blocks %}
            <li
              id="Slide-{{ section.id }}-{{ forloop.index }}"
              class="grid__item slider__slide scroll-trigger animate--slide-in"
              {% if settings.animations_reveal_on_scroll %}
              data-cascade
              style="--animation-order: {{ forloop.index }};"
              {% endif %}>
              <div class="nerd-iconwithtext nerd-iconwithtext--padding {% if section.settings.card_height == "fit_large" %} height-full {% endif %}">
                {% if block.settings.icon %}
                  {% render 'icon-accordion', icon: block.settings.icon %}
                {% endif %}
                <div class="nerd-iconwithtext--content">
                  <div class="nerd-iconwithtext--title">{{ block.settings.title }}</div>
                  <div class="nerd-iconwithtext--text">{{ block.settings.text }}</div>
                </div>
              </div>
            </li>
          {%- else -%}
            {%- for i in (1..3) -%}
              <li
                id="Slide-{{ section.id }}-{{ forloop.index }}"
                class="grid__item slider__slide scroll-trigger animate--slide-in"
                {% if settings.animations_reveal_on_scroll %}
                data-cascade
                style="--animation-order: {{ forloop.index }};"
                {% endif %}>
                <div class="nerd-testimonial color-{{ section.settings.color_scheme_card }}">
                  {% render 'icon-accordion', icon: "checkbox" %}
                  <div class="nerd-text-small italic">
                    Something about your service..
                  </div>
                </div>
              </li>
            {%- endfor -%}
          {%- endfor -%}
        </ul>

        {%- if show_mobile_slider or show_desktop_slider -%}
           <div class="slider-buttons no-js-hidden">
          <button
            type="button"
            class="slider-button slider-button--prev"
            name="previous"
            aria-label="{{ 'general.slider.previous_slide' | t }}"
            aria-controls="Slider-{{ section.id }}"
          >
            {% render 'icon-circle' %}
          </button>
          <div class="slider-counter caption">
            <span class="slider-counter--current">1</span>
            <span aria-hidden="true"> / </span>
            <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
            <span class="slider-counter--total">{{ products_to_display }}</span>
          </div>
          <button
            type="button"
            class="slider-button slider-button--next"
            name="next"
            aria-label="{{ 'general.slider.next_slide' | t }}"
            aria-controls="Slider-{{ section.id }}"
          >
           {% render 'icon-circle' %}
          </button>
        </div>
        {%- endif -%}
      </slider-component>
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Text With icons",
    "settings": [
      {
        "type": "inline_richtext",
        "id": "title",
        "default": "Title",
        "label": "Title"
      },

      {
        "type": "checkbox",
        "id": "full_width",
        "default": false,
        "label": "Full Width"

      },
      {
        "type": "range",
        "id": "icon_height_desktop",
        "min": 30,
        "max": 150,
        "step": 5,
        "default": 50,
        "label": "Icon Size Desktop"
      },
      {
        "type": "range",
        "id": "icon_height_mobile",
        "min": 20,
        "max": 100,
        "step": 5,
        "default": 20,
        "label": "Icon Size Mobile"
      }, {
        "type": "radio",
        "id": "display_style",
        "label": "Display Style",
        "default": "slider",
        "options": [
          {
            "value": "slider",
            "label": "Slider"
          }, {
            "value": "grid",
            "label": "grid"
          }

        ]
      }, {
        "type": "radio",
        "id": "columns_desktop",
        "label": "Columns in Desktop",
        "default": "4",
        "options": [
          {
            "value": "2",
            "label": "2"
          }, {
            "value": "3",
            "label": "3"
          }, {
            "value": "4",
            "label": "4"
          }

        ]
      }, {
        "type": "radio",
        "id": "columns_mobile",
        "label": "Columns in Mobile",
        "default": "1",
        "options": [
          {
            "value": "1",
            "label": "1"
          }, {
            "value": "2",
            "label": "2"
          }

        ]
      }, {
        "type": "select",
        "id": "card_height",
        "label": "Card Height",
        "default": "fit_large",
        "options": [
          {
            "value": "fit_large",
            "label": "Fit Largest"
          }, {
            "value": "fit_content",
            "label": "Fit Content"
          }

        ]

      }, {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "info": "t:sections.image-banner.settings.color_scheme.info",
        "default": "background-1"
      }, {
        "type": "color_scheme",
        "id": "color_scheme_card",
        "label": "Card Color Scheme",
        "default": "background-2"
      }

    ],
    "blocks": [
      {
        "type": "text-with-icon",
        "name": "Text with icon",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "default": "Service Title",
            "label": "Title"
          },
          {
            "type": "text",
            "id": "text",
            "default": "Something about your service...",
            "label": "Text"
          }, {
            "type": "select",
            "id": "icon",
            "options": [
              {
                "value": "none",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__1.label"
              },
              {
                "value": "apple",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__2.label"
              },
              {
                "value": "banana",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__3.label"
              },
              {
                "value": "bottle",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__4.label"
              }, {
                "value": "box",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__5.label"
              }, {
                "value": "carrot",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__6.label"
              }, {
                "value": "chat_bubble",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__7.label"
              }, {
                "value": "check_mark",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__8.label"
              }, {
                "value": "clipboard",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__9.label"
              }, {
                "value": "dairy",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__10.label"
              }, {
                "value": "dairy_free",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__11.label"
              }, {
                "value": "dryer",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__12.label"
              }, {
                "value": "eye",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__13.label"
              }, {
                "value": "fire",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__14.label"
              }, {
                "value": "gluten_free",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__15.label"
              }, {
                "value": "heart",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__16.label"
              }, {
                "value": "iron",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__17.label"
              }, {
                "value": "leaf",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__18.label"
              }, {
                "value": "leather",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__19.label"
              }, {
                "value": "lightning_bolt",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__20.label"
              }, {
                "value": "lipstick",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__21.label"
              }, {
                "value": "lock",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__22.label"
              }, {
                "value": "map_pin",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__23.label"
              }, {
                "value": "nut_free",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__24.label"
              }, {
                "value": "pants",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__25.label"
              }, {
                "value": "paw_print",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__26.label"
              }, {
                "value": "pepper",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__27.label"
              }, {
                "value": "perfume",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__28.label"
              }, {
                "value": "plane",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__29.label"
              }, {
                "value": "plant",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__30.label"
              }, {
                "value": "price_tag",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__31.label"
              }, {
                "value": "question_mark",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__32.label"
              }, {
                "value": "recycle",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__33.label"
              }, {
                "value": "return",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__34.label"
              }, {
                "value": "ruler",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__35.label"
              }, {
                "value": "serving_dish",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__36.label"
              }, {
                "value": "shirt",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__37.label"
              }, {
                "value": "shoe",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__38.label"
              }, {
                "value": "silhouette",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__39.label"
              }, {
                "value": "snowflake",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__40.label"
              }, {
                "value": "star",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__41.label"
              }, {
                "value": "stopwatch",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__42.label"
              }, {
                "value": "truck",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__43.label"
              }, {
                "value": "washing",
                "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.options__44.label"
              }
            ],
            "default": "check_mark",
            "label": "t:sections.collapsible_content.blocks.collapsible_row.settings.icon.label"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Text With Icon"
      }
    ]
  }
{% endschema %}